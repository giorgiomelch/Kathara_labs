!
password zebra
enable password zebra
!
!  BGP CONFIGURATION
!
debug bgp keepalives
debug bgp updates in
debug bgp updates out
!
router bgp 100

    no bgp network import-check
    !
    ! NEIGHBORS
    !
    neighbor 11.0.0.2 remote-as 20
    neighbor 11.0.0.6 remote-as 20
    !
    ! NETWORKS
    !
    network 100.1.0.0/16
    !
    ! POLICIES
    !
    neighbor 11.0.0.2 prefix-list defaultIn in
    neighbor 11.0.0.2 prefix-list partialOut out

    neighbor 11.0.0.6 prefix-list partialOut out
	neighbor 11.0.0.6 route-map metricOut out
    neighbor 11.0.0.6 prefix-list defaultIn in
	neighbor 11.0.0.6 route-map localPrefIn out
    !
    access-list MyAggregate permit 100.1.0.0/16
    !
    ip prefix-list partialOut seq 5 permit 100.1.0.0/16
    ip prefix-list defaultIn seq 5 permit 0.0.0.0/0
    !
    route-map metricOut permit 10
        match ip address MyAggregate
        set metric 10

    route-map localPrefIn permit 10
        set local-preference 90
!
!  RIP CONFIGURATION
!
router rip
!send rip multicast packets to interfaces falling into this prefix
network 100.1.0.0/24
redistribute bgp
!
log file /var/log/frr/frr.log